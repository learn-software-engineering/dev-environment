(() => {
  // ns-hugo:/tmp/hugo_cache/modules/filecache/modules/pkg/mod/github.com/hbstack/header/modules/theme-toggle@v0.5.2/assets/hb/modules/header-theme-toggle/init/index.ts
  (() => {
    "use strict";
    const THEME_AUTO = "auto";
    const THEME_DARK = "dark";
    const THEME_LIGHT = "light";
    const THEME_KEY = "hb-theme";
    const getPreferredTheme = () => {
      return window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? THEME_DARK : THEME_LIGHT;
    };
    const getTheme = () => {
      const v = localStorage.getItem(THEME_KEY);
      return v ? v : THEME_AUTO;
    };
    const setTheme = (theme2, save = false) => {
      save && localStorage.setItem(THEME_KEY, theme2);
      const value = theme2 === THEME_AUTO ? getPreferredTheme() : theme2;
      document.documentElement.setAttribute("data-bs-theme", value);
      onSet(value);
    };
    const onSet = (theme2) => {
      const event = new CustomEvent("hb:theme", { detail: { theme: theme2 } });
      document.dispatchEvent(event);
    };
    const activeTheme = (theme2) => {
      let name = "";
      document.querySelectorAll("[data-bs-theme-value]").forEach((toggle) => {
        if (toggle.getAttribute("data-bs-theme-value") === theme2) {
          toggle.classList.add("active");
          name = toggle.getAttribute("data-bs-theme-name") ?? "";
        } else {
          toggle.classList.remove("active");
        }
      });
      const newIcon = document.body.querySelector(`[data-bs-theme-value="${theme2}"] svg`)?.cloneNode(true);
      const oldIcon = document.body.querySelector(".btn-theme-toggle svg");
      oldIcon?.replaceWith(newIcon);
      const nameEle = document.querySelector(".theme-toggle .theme-name");
      nameEle.innerHTML = name;
    };
    const theme = getTheme();
    setTheme(theme);
    window.addEventListener("DOMContentLoaded", () => {
      activeTheme(theme);
      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", (e) => {
        if (getTheme() !== THEME_AUTO) {
          return;
        }
        setTheme(e.matches ? THEME_DARK : THEME_LIGHT);
      });
      const activeToggle = (toggle) => {
        const v = toggle.getAttribute("data-bs-theme-value");
        const theme2 = v ? v : THEME_AUTO;
        setTheme(theme2, true);
        activeTheme(theme2);
      };
      const toggles = document.querySelectorAll("[data-bs-theme-value]");
      toggles.forEach((toggle) => {
        toggle.addEventListener("click", () => {
          activeToggle(toggle);
        });
      });
      const btnToggle = document.querySelector(".btn-theme-toggle");
      if (btnToggle !== null && btnToggle.getAttribute("data-style") === "switch") {
        btnToggle.addEventListener("click", () => {
          let next = 0;
          toggles.forEach((toggle, i) => {
            if (toggle.classList.contains("active")) {
              next = i + 1;
              return;
            }
          });
          if (next >= toggles.length) {
            next = 0;
          }
          activeToggle(toggles[next]);
        });
      }
    });
  })();
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibnMtaHVnbzovdG1wL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vaGJzdGFjay9oZWFkZXIvbW9kdWxlcy90aGVtZS10b2dnbGVAdjAuNS4yL2Fzc2V0cy9oYi9tb2R1bGVzL2hlYWRlci10aGVtZS10b2dnbGUvaW5pdC9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiKCgpID0+IHtcbiAgICAndXNlIHN0cmljdCdcblxuICAgIGNvbnN0IFRIRU1FX0FVVE8gPSAnYXV0bydcbiAgICBjb25zdCBUSEVNRV9EQVJLID0gJ2RhcmsnXG4gICAgY29uc3QgVEhFTUVfTElHSFQgPSAnbGlnaHQnXG5cbiAgICBjb25zdCBUSEVNRV9LRVkgPSAnaGItdGhlbWUnXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN5c3RlbSdzIHByZWZlcnJlZCB0aGVtZS5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIGNvbnN0IGdldFByZWZlcnJlZFRoZW1lID0gKCk6IHN0cmluZyA9PiB7XG4gICAgICAgIHJldHVybiB3aW5kb3cubWF0Y2hNZWRpYSAmJiB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLm1hdGNoZXMgPyBUSEVNRV9EQVJLIDogVEhFTUVfTElHSFRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCB0aGVtZS5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIGNvbnN0IGdldFRoZW1lID0gKCk6IHN0cmluZyA9PiB7XG4gICAgICAgIGNvbnN0IHYgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUSEVNRV9LRVkpXG4gICAgICAgIHJldHVybiB2ID8gdiA6IFRIRU1FX0FVVE9cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRoZW1lIHdpdGggdGhlIGdpdmVuIHRoZW1lLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2F2ZSB3aGV0aGVyIHRvIHNhdmUgaXQgdG8gbG9jYWxTdG9yYWdlLlxuICAgICAqL1xuICAgIGNvbnN0IHNldFRoZW1lID0gKHRoZW1lOiBzdHJpbmcsIHNhdmUgPSBmYWxzZSkgPT4ge1xuICAgICAgICBzYXZlICYmIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFRIRU1FX0tFWSwgdGhlbWUpXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhlbWUgPT09IFRIRU1FX0FVVE8gPyBnZXRQcmVmZXJyZWRUaGVtZSgpIDogdGhlbWVcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1icy10aGVtZScsIHZhbHVlKVxuICAgICAgICBvblNldCh2YWx1ZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbWl0cyBhIGN1c3RvbSBldmVudCBvbiB0aGVtZSBjaGFuZ2UuXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lIFxuICAgICAqL1xuICAgIGNvbnN0IG9uU2V0ID0gKHRoZW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdoYjp0aGVtZScsIHsgZGV0YWlsOiB7IHRoZW1lOiB0aGVtZSB9IH0pO1xuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3RpdmUgY3VycmVudCB0aGVtZSdzIGljb24uXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lIFxuICAgICAqL1xuICAgIGNvbnN0IGFjdGl2ZVRoZW1lID0gKHRoZW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgbGV0IG5hbWUgPSAnJ1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1icy10aGVtZS12YWx1ZV0nKS5mb3JFYWNoKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0b2dnbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWJzLXRoZW1lLXZhbHVlJykgPT09IHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICAgICAgICAgICAgbmFtZSA9IHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtdGhlbWUtbmFtZScpID8/ICcnXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIHN5bmMgdGhlbWUgaWNvbi5cbiAgICAgICAgY29uc3QgbmV3SWNvbiA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihgW2RhdGEtYnMtdGhlbWUtdmFsdWU9XCIke3RoZW1lfVwiXSBzdmdgKT8uY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50XG4gICAgICAgIGNvbnN0IG9sZEljb24gPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5idG4tdGhlbWUtdG9nZ2xlIHN2ZycpXG4gICAgICAgIG9sZEljb24/LnJlcGxhY2VXaXRoKG5ld0ljb24pXG4gICAgICAgIC8vIHN5bmMgdGhlbWUgbmFtZS5cbiAgICAgICAgY29uc3QgbmFtZUVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aGVtZS10b2dnbGUgLnRoZW1lLW5hbWUnKSBhcyBIVE1MRWxlbWVudFxuICAgICAgICBuYW1lRWxlLmlubmVySFRNTCA9IG5hbWVcbiAgICB9XG5cbiAgICBjb25zdCB0aGVtZSA9IGdldFRoZW1lKClcbiAgICAvLyBTZXQgdGhlIGRhdGEgYXR0cmlidXRlIEFTQVAsIGluIG9yZGVyIHRvIGF2b2lkIGZsaWNrZXJpbmcuXG4gICAgc2V0VGhlbWUodGhlbWUpXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgLy8gQWN0aXZlIHRoZSB0aGVtZSdzIGljb24gb24gcGFnZSBsb2FkLlxuICAgICAgICBhY3RpdmVUaGVtZSh0aGVtZSlcblxuICAgICAgICB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZ2V0VGhlbWUoKSAhPT0gVEhFTUVfQVVUTykge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBETyBOT1Qgc2F2ZSB0aGUgdGhlbWUuXG4gICAgICAgICAgICBzZXRUaGVtZShlLm1hdGNoZXMgPyBUSEVNRV9EQVJLIDogVEhFTUVfTElHSFQpXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgYWN0aXZlVG9nZ2xlID0gKHRvZ2dsZTogRWxlbWVudCk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgY29uc3QgdiA9IHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtdGhlbWUtdmFsdWUnKVxuICAgICAgICAgICAgY29uc3QgdGhlbWUgPSB2ID8gdiA6IFRIRU1FX0FVVE9cbiAgICAgICAgICAgIHNldFRoZW1lKHRoZW1lLCB0cnVlKVxuICAgICAgICAgICAgYWN0aXZlVGhlbWUodGhlbWUpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b2dnbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYnMtdGhlbWUtdmFsdWVdJylcbiAgICAgICAgdG9nZ2xlcy5mb3JFYWNoKHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICB0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWN0aXZlVG9nZ2xlKHRvZ2dsZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgYnRuVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi10aGVtZS10b2dnbGUnKVxuICAgICAgICBpZiAoYnRuVG9nZ2xlICE9PSBudWxsICYmIGJ0blRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3R5bGUnKSA9PT0gJ3N3aXRjaCcpIHtcbiAgICAgICAgICAgIGJ0blRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IDBcbiAgICAgICAgICAgICAgICB0b2dnbGVzLmZvckVhY2goKHRvZ2dsZSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9nZ2xlLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBpKzFcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBpZiAobmV4dCA+PSB0b2dnbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhY3RpdmVUb2dnbGUodG9nZ2xlc1tuZXh0XSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxufSkoKVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7QUFBQSxHQUFDLE1BQU07QUFDSDtBQUVBLFVBQU0sYUFBYTtBQUNuQixVQUFNLGFBQWE7QUFDbkIsVUFBTSxjQUFjO0FBRXBCLFVBQU0sWUFBWTtBQU9sQixVQUFNLG9CQUFvQixNQUFjO0FBQ3BDLGFBQU8sT0FBTyxjQUFjLE9BQU8sV0FBVyw4QkFBOEIsRUFBRSxVQUFVLGFBQWE7QUFBQSxJQUN6RztBQU9BLFVBQU0sV0FBVyxNQUFjO0FBQzNCLFlBQU0sSUFBSSxhQUFhLFFBQVEsU0FBUztBQUN4QyxhQUFPLElBQUksSUFBSTtBQUFBLElBQ25CO0FBUUEsVUFBTSxXQUFXLENBQUNBLFFBQWUsT0FBTyxVQUFVO0FBQzlDLGNBQVEsYUFBYSxRQUFRLFdBQVdBLE1BQUs7QUFDN0MsWUFBTSxRQUFRQSxXQUFVLGFBQWEsa0JBQWtCLElBQUlBO0FBQzNELGVBQVMsZ0JBQWdCLGFBQWEsaUJBQWlCLEtBQUs7QUFDNUQsWUFBTSxLQUFLO0FBQUEsSUFDZjtBQU9BLFVBQU0sUUFBUSxDQUFDQSxXQUFVO0FBQ3JCLFlBQU0sUUFBUSxJQUFJLFlBQVksWUFBWSxFQUFFLFFBQVEsRUFBRSxPQUFPQSxPQUFNLEVBQUUsQ0FBQztBQUN0RSxlQUFTLGNBQWMsS0FBSztBQUFBLElBQ2hDO0FBT0EsVUFBTSxjQUFjLENBQUNBLFdBQWtCO0FBQ25DLFVBQUksT0FBTztBQUNYLGVBQVMsaUJBQWlCLHVCQUF1QixFQUFFLFFBQVEsQ0FBQyxXQUFXO0FBQ25FLFlBQUksT0FBTyxhQUFhLHFCQUFxQixNQUFNQSxRQUFPO0FBQ3RELGlCQUFPLFVBQVUsSUFBSSxRQUFRO0FBQzdCLGlCQUFPLE9BQU8sYUFBYSxvQkFBb0IsS0FBSztBQUFBLFFBQ3hELE9BQU87QUFDSCxpQkFBTyxVQUFVLE9BQU8sUUFBUTtBQUFBLFFBQ3BDO0FBQUEsTUFDSixDQUFDO0FBR0QsWUFBTSxVQUFVLFNBQVMsS0FBSyxjQUFjLHlCQUF5QkEsTUFBSyxRQUFRLEdBQUcsVUFBVSxJQUFJO0FBQ25HLFlBQU0sVUFBVSxTQUFTLEtBQUssY0FBYyx1QkFBdUI7QUFDbkUsZUFBUyxZQUFZLE9BQU87QUFFNUIsWUFBTSxVQUFVLFNBQVMsY0FBYywyQkFBMkI7QUFDbEUsY0FBUSxZQUFZO0FBQUEsSUFDeEI7QUFFQSxVQUFNLFFBQVEsU0FBUztBQUV2QixhQUFTLEtBQUs7QUFFZCxXQUFPLGlCQUFpQixvQkFBb0IsTUFBTTtBQUU5QyxrQkFBWSxLQUFLO0FBRWpCLGFBQU8sV0FBVyw4QkFBOEIsRUFBRSxpQkFBaUIsVUFBVSxDQUFDLE1BQU07QUFDaEYsWUFBSSxTQUFTLE1BQU0sWUFBWTtBQUMzQjtBQUFBLFFBQ0o7QUFHQSxpQkFBUyxFQUFFLFVBQVUsYUFBYSxXQUFXO0FBQUEsTUFDakQsQ0FBQztBQUVELFlBQU0sZUFBZSxDQUFDLFdBQTBCO0FBQzVDLGNBQU0sSUFBSSxPQUFPLGFBQWEscUJBQXFCO0FBQ25ELGNBQU1BLFNBQVEsSUFBSSxJQUFJO0FBQ3RCLGlCQUFTQSxRQUFPLElBQUk7QUFDcEIsb0JBQVlBLE1BQUs7QUFBQSxNQUNyQjtBQUVBLFlBQU0sVUFBVSxTQUFTLGlCQUFpQix1QkFBdUI7QUFDakUsY0FBUSxRQUFRLFlBQVU7QUFDdEIsZUFBTyxpQkFBaUIsU0FBUyxNQUFNO0FBQ25DLHVCQUFhLE1BQU07QUFBQSxRQUN2QixDQUFDO0FBQUEsTUFDTCxDQUFDO0FBRUQsWUFBTSxZQUFZLFNBQVMsY0FBYyxtQkFBbUI7QUFDNUQsVUFBSSxjQUFjLFFBQVEsVUFBVSxhQUFhLFlBQVksTUFBTSxVQUFVO0FBQ3pFLGtCQUFVLGlCQUFpQixTQUFTLE1BQU07QUFDdEMsY0FBSSxPQUFPO0FBQ1gsa0JBQVEsUUFBUSxDQUFDLFFBQVEsTUFBTTtBQUMzQixnQkFBSSxPQUFPLFVBQVUsU0FBUyxRQUFRLEdBQUc7QUFDckMscUJBQU8sSUFBRTtBQUNUO0FBQUEsWUFDSjtBQUFBLFVBQ0osQ0FBQztBQUNELGNBQUksUUFBUSxRQUFRLFFBQVE7QUFDeEIsbUJBQU87QUFBQSxVQUNYO0FBQ0EsdUJBQWEsUUFBUSxJQUFJLENBQUM7QUFBQSxRQUM5QixDQUFDO0FBQUEsTUFDTDtBQUFBLElBQ0osQ0FBQztBQUFBLEVBQ0wsR0FBRzsiLAogICJuYW1lcyI6IFsidGhlbWUiXQp9Cg==
