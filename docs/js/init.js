(() => {
  // ns-hugo:/tmp/hugo_cache/modules/filecache/modules/pkg/mod/github.com/hbstack/header/modules/theme-toggle@v0.1.14/assets/hb/modules/header-theme-toggle/init/index.ts
  (() => {
    "use strict";
    const THEME_AUTO = "auto";
    const THEME_DARK = "dark";
    const THEME_LIGHT = "light";
    const THEME_KEY = "hb-theme";
    const getPreferredTheme = () => {
      return window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? THEME_DARK : THEME_LIGHT;
    };
    const getTheme = () => {
      const v = localStorage.getItem(THEME_KEY);
      return v ? v : THEME_AUTO;
    };
    const setTheme = (theme2, save = false) => {
      save && localStorage.setItem(THEME_KEY, theme2);
      const value = theme2 === THEME_AUTO ? getPreferredTheme() : theme2;
      document.documentElement.setAttribute("data-bs-theme", value);
      onSet(value);
    };
    const onSet = (theme2) => {
      const event = new CustomEvent("hb:theme", { detail: { theme: theme2 } });
      document.dispatchEvent(event);
    };
    const activeTheme = (theme2) => {
      document.querySelectorAll("[data-bs-theme-value]").forEach((toggle) => {
        if (toggle.getAttribute("data-bs-theme-value") === theme2) {
          toggle.classList.add("active");
        } else {
          toggle.classList.remove("active");
        }
      });
      const newIcon = document.querySelector(`[data-bs-theme-value="${theme2}"] svg`)?.cloneNode(true);
      const oldIcon = document.querySelector(".theme-toggle-icon svg");
      oldIcon?.replaceWith(newIcon);
    };
    const theme = getTheme();
    setTheme(theme);
    window.addEventListener("DOMContentLoaded", () => {
      activeTheme(theme);
      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", (e) => {
        if (getTheme() !== THEME_AUTO) {
          return;
        }
        setTheme(e.matches ? THEME_DARK : THEME_LIGHT);
      });
      document.querySelectorAll("[data-bs-theme-value]").forEach((toggle) => {
        toggle.addEventListener("click", () => {
          const v = toggle.getAttribute("data-bs-theme-value");
          const theme2 = v ? v : THEME_AUTO;
          setTheme(theme2, true);
          activeTheme(theme2);
        });
      });
    });
  })();
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibnMtaHVnbzovdG1wL2h1Z29fY2FjaGUvbW9kdWxlcy9maWxlY2FjaGUvbW9kdWxlcy9wa2cvbW9kL2dpdGh1Yi5jb20vaGJzdGFjay9oZWFkZXIvbW9kdWxlcy90aGVtZS10b2dnbGVAdjAuMS4xNC9hc3NldHMvaGIvbW9kdWxlcy9oZWFkZXItdGhlbWUtdG9nZ2xlL2luaXQvaW5kZXgudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIigoKSA9PiB7XG4gICAgJ3VzZSBzdHJpY3QnXG5cbiAgICBjb25zdCBUSEVNRV9BVVRPID0gJ2F1dG8nXG4gICAgY29uc3QgVEhFTUVfREFSSyA9ICdkYXJrJ1xuICAgIGNvbnN0IFRIRU1FX0xJR0hUID0gJ2xpZ2h0J1xuXG4gICAgY29uc3QgVEhFTUVfS0VZID0gJ2hiLXRoZW1lJ1xuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzeXN0ZW0ncyBwcmVmZXJyZWQgdGhlbWUuXG4gICAgICogXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBjb25zdCBnZXRQcmVmZXJyZWRUaGVtZSA9ICgpOiBzdHJpbmcgPT4ge1xuICAgICAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEgJiYgd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKS5tYXRjaGVzID8gVEhFTUVfREFSSyA6IFRIRU1FX0xJR0hUXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgdGhlbWUuXG4gICAgICogXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBjb25zdCBnZXRUaGVtZSA9ICgpOiBzdHJpbmcgPT4ge1xuICAgICAgICBjb25zdCB2ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVEhFTUVfS0VZKVxuICAgICAgICByZXR1cm4gdiA/IHYgOiBUSEVNRV9BVVRPXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0aGVtZSB3aXRoIHRoZSBnaXZlbiB0aGVtZS5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGhlbWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNhdmUgd2hldGhlciB0byBzYXZlIGl0IHRvIGxvY2FsU3RvcmFnZS5cbiAgICAgKi9cbiAgICBjb25zdCBzZXRUaGVtZSA9ICh0aGVtZTogc3RyaW5nLCBzYXZlID0gZmFsc2UpID0+IHtcbiAgICAgICAgc2F2ZSAmJiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUSEVNRV9LRVksIHRoZW1lKVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoZW1lID09PSBUSEVNRV9BVVRPID8gZ2V0UHJlZmVycmVkVGhlbWUoKSA6IHRoZW1lXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtdGhlbWUnLCB2YWx1ZSlcbiAgICAgICAgb25TZXQodmFsdWUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW1pdHMgYSBjdXN0b20gZXZlbnQgb24gdGhlbWUgY2hhbmdlLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZSBcbiAgICAgKi9cbiAgICBjb25zdCBvblNldCA9ICh0aGVtZSkgPT4ge1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnaGI6dGhlbWUnLCB7IGRldGFpbDogeyB0aGVtZTogdGhlbWUgfSB9KTtcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWN0aXZlIGN1cnJlbnQgdGhlbWUncyBpY29uLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZSBcbiAgICAgKi9cbiAgICBjb25zdCBhY3RpdmVUaGVtZSA9ICh0aGVtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJzLXRoZW1lLXZhbHVlXScpLmZvckVhY2goKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtdGhlbWUtdmFsdWUnKSA9PT0gdGhlbWUpIHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgbmV3SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWJzLXRoZW1lLXZhbHVlPVwiJHt0aGVtZX1cIl0gc3ZnYCk/LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudFxuICAgICAgICBjb25zdCBvbGRJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRoZW1lLXRvZ2dsZS1pY29uIHN2ZycpXG4gICAgICAgIG9sZEljb24/LnJlcGxhY2VXaXRoKG5ld0ljb24pXG4gICAgfVxuXG4gICAgY29uc3QgdGhlbWUgPSBnZXRUaGVtZSgpXG4gICAgLy8gU2V0IHRoZSBkYXRhIGF0dHJpYnV0ZSBBU0FQLCBpbiBvcmRlciB0byBhdm9pZCBmbGlja2VyaW5nLlxuICAgIHNldFRoZW1lKHRoZW1lKVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgICAgIC8vIEFjdGl2ZSB0aGUgdGhlbWUncyBpY29uIG9uIHBhZ2UgbG9hZC5cbiAgICAgICAgYWN0aXZlVGhlbWUodGhlbWUpXG5cbiAgICAgICAgd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGdldFRoZW1lKCkgIT09IFRIRU1FX0FVVE8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRE8gTk9UIHNhdmUgdGhlIHRoZW1lLlxuICAgICAgICAgICAgc2V0VGhlbWUoZS5tYXRjaGVzID8gVEhFTUVfREFSSyA6IFRIRU1FX0xJR0hUKVxuICAgICAgICB9KVxuXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJzLXRoZW1lLXZhbHVlXScpXG4gICAgICAgICAgICAuZm9yRWFjaCh0b2dnbGUgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtdGhlbWUtdmFsdWUnKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aGVtZSA9IHYgPyB2IDogVEhFTUVfQVVUT1xuICAgICAgICAgICAgICAgICAgICBzZXRUaGVtZSh0aGVtZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGhlbWUodGhlbWUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgfSlcbn0pKClcbiJdLAogICJtYXBwaW5ncyI6ICI7O0FBQUEsR0FBQyxNQUFNO0FBQ0g7QUFFQSxVQUFNLGFBQWE7QUFDbkIsVUFBTSxhQUFhO0FBQ25CLFVBQU0sY0FBYztBQUVwQixVQUFNLFlBQVk7QUFPbEIsVUFBTSxvQkFBb0IsTUFBYztBQUNwQyxhQUFPLE9BQU8sY0FBYyxPQUFPLFdBQVcsOEJBQThCLEVBQUUsVUFBVSxhQUFhO0FBQUEsSUFDekc7QUFPQSxVQUFNLFdBQVcsTUFBYztBQUMzQixZQUFNLElBQUksYUFBYSxRQUFRLFNBQVM7QUFDeEMsYUFBTyxJQUFJLElBQUk7QUFBQSxJQUNuQjtBQVFBLFVBQU0sV0FBVyxDQUFDQSxRQUFlLE9BQU8sVUFBVTtBQUM5QyxjQUFRLGFBQWEsUUFBUSxXQUFXQSxNQUFLO0FBQzdDLFlBQU0sUUFBUUEsV0FBVSxhQUFhLGtCQUFrQixJQUFJQTtBQUMzRCxlQUFTLGdCQUFnQixhQUFhLGlCQUFpQixLQUFLO0FBQzVELFlBQU0sS0FBSztBQUFBLElBQ2Y7QUFPQSxVQUFNLFFBQVEsQ0FBQ0EsV0FBVTtBQUNyQixZQUFNLFFBQVEsSUFBSSxZQUFZLFlBQVksRUFBRSxRQUFRLEVBQUUsT0FBT0EsT0FBTSxFQUFFLENBQUM7QUFDdEUsZUFBUyxjQUFjLEtBQUs7QUFBQSxJQUNoQztBQU9BLFVBQU0sY0FBYyxDQUFDQSxXQUFrQjtBQUNuQyxlQUFTLGlCQUFpQix1QkFBdUIsRUFBRSxRQUFRLENBQUMsV0FBVztBQUNuRSxZQUFJLE9BQU8sYUFBYSxxQkFBcUIsTUFBTUEsUUFBTztBQUN0RCxpQkFBTyxVQUFVLElBQUksUUFBUTtBQUFBLFFBQ2pDLE9BQU87QUFDSCxpQkFBTyxVQUFVLE9BQU8sUUFBUTtBQUFBLFFBQ3BDO0FBQUEsTUFDSixDQUFDO0FBRUQsWUFBTSxVQUFVLFNBQVMsY0FBYyx5QkFBeUJBLE1BQUssUUFBUSxHQUFHLFVBQVUsSUFBSTtBQUM5RixZQUFNLFVBQVUsU0FBUyxjQUFjLHdCQUF3QjtBQUMvRCxlQUFTLFlBQVksT0FBTztBQUFBLElBQ2hDO0FBRUEsVUFBTSxRQUFRLFNBQVM7QUFFdkIsYUFBUyxLQUFLO0FBRWQsV0FBTyxpQkFBaUIsb0JBQW9CLE1BQU07QUFFOUMsa0JBQVksS0FBSztBQUVqQixhQUFPLFdBQVcsOEJBQThCLEVBQUUsaUJBQWlCLFVBQVUsQ0FBQyxNQUFNO0FBQ2hGLFlBQUksU0FBUyxNQUFNLFlBQVk7QUFDM0I7QUFBQSxRQUNKO0FBR0EsaUJBQVMsRUFBRSxVQUFVLGFBQWEsV0FBVztBQUFBLE1BQ2pELENBQUM7QUFFRCxlQUFTLGlCQUFpQix1QkFBdUIsRUFDNUMsUUFBUSxZQUFVO0FBQ2YsZUFBTyxpQkFBaUIsU0FBUyxNQUFNO0FBQ25DLGdCQUFNLElBQUksT0FBTyxhQUFhLHFCQUFxQjtBQUNuRCxnQkFBTUEsU0FBUSxJQUFJLElBQUk7QUFDdEIsbUJBQVNBLFFBQU8sSUFBSTtBQUNwQixzQkFBWUEsTUFBSztBQUFBLFFBQ3JCLENBQUM7QUFBQSxNQUNMLENBQUM7QUFBQSxJQUNULENBQUM7QUFBQSxFQUNMLEdBQUc7IiwKICAibmFtZXMiOiBbInRoZW1lIl0KfQo=
